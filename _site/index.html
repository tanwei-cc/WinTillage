<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand" />
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WinTillage</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/viewerjs/1.1.0/viewer.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/froala-editor/2.8.1/css/froala_editor.pkgd.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/froala-editor/2.8.1/css/froala_style.min.css" rel="stylesheet">
    <link href="css/style.css?20180830145242" rel="stylesheet"> 
    
</head>

<body>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="">
                    <img src="favicon.ico" class="logo" />
                </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <!-- <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">工具
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            
                            <li>
                                <a href="/2018/08/27/tools-money-exchange.html">货币兑换计算器</a>
                            </li>
                            
                        </ul>
                    </li>
                </ul> -->
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            常用链接<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="https://docs.qq.com/sheet/BmAfQN2sop2v1PD3Vf3ahkL33GDWKK3baohy05BGA62tyoU03Cpduu0IAjCH0EBPWM0noU5K3?opendocxfrom=admin" target="_blank">【文档】商品型号</a></li>
                            <li><a href="http://merchant.fy.intmall.net/main/panel" target="_blank">【管理】丰卖网</a></li>
                            <li><a href="http://en.intmall.com/category/41.html" target="_blank">【耳机】丰卖网</a></li>
                            <li><a href="https://www.aliexpress.com/category/200010206/smart-watches.html?spm=2114.search0103.0.0.5eba3e706EzqQ2&isrefine=y&site=glo&g=y&tag=" target="_blank">【智能手表】速卖通</a></li>
                            <li><a href="https://www.aliexpress.com/category/63705/earphones-headphones.html?spm=2114.search0103.1.19.960526c3aee6Mk&site=glo" target="_blank">【耳机】速卖通</a></li>
                            <li><a href="https://www.amazon.com/s/ref=nb_sb_ss_ime_c_2_11?url=search-alias%3Delectronics&field-keywords=smart+watch&sprefix=smart+watch%2Caps%2C111&crid=2TR46ERJH0UHF" target="_blank">【智能手表】亚马逊</a></li>
                            <li><a href="https://www.amazon.com/Headphones-Accessories-Supplies/b/ref=nav_shopall_headphones?ie=UTF8&node=172541" target="_blank">【耳机】亚马逊</a></li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            工具<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="https://pan.baidu.com/" target="_blank">百度网盘</a></li>
                            <li><a href="http://fanyi.baidu.com/#zh/en/" target="_blank">百度翻译</a></li>
                            <li><a href="http://fanyi.youdao.com/" target="_blank">有道翻译</a></li>
                            <li><a href="https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&tn=baidu&wd=%E8%B4%A7%E5%B8%81%E5%85%91%E6%8D%A2%E8%AE%A1%E7%AE%97%E5%99%A8&oq=%25E6%25B1%2587%25E7%258E%2587&rsv_pq=f1f256ae0000b8c3&rsv_t=1f9f7wjVwwbCZfIctHynNHODbXgPjA6UDP%2FCh2n1HEgMT1wAwtTTgAEbR0s&rqlang=cn&rsv_enter=0&rsv_sug3=13&rsv_sug1=12&rsv_sug7=100&rsv_sug2=1&prefixsug=%25E8%25B4%25A7%25E5%25B8%2581%25E5%2585%2591%25E6%258D%25A2&rsp=1&inputT=7103&rsv_sug4=7858"
                                    target="_blank">货币转换</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/viewerjs/1.1.0/viewer.min.js"></script>
    <script src="https://cdn.bootcss.com/froala-editor/2.8.1/js/froala_editor.pkgd.min.js"></script>

    <div class="container theme-showcase" role="main">
        <div class="row">
    <div class="col-sm-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">定价器</h3>
            </div>
            <div class="panel-body">
                <div class="money-exchange">
    <label>
        进价(¥) <input class="me-bid" type="number" />
    </label> +
    <label>
        邮费(¥) <input class="me-express-fee" type="number" />
    </label> +
    <label>
        利润率(%) <input class="me-profit-per" type="number" value="30" />
    </label> =
    <p>
        售价¥<span class="me-price"></span>
        <span class="equivalent">
            | $<span class="me-usd-price"></span>
        </span> - 成本¥<span class="me-cost"></span> - 平台费5% = <br>纯利润¥<span class="me-profit"></span>
        <span class="equivalent">
            | <span class="me-pure-profit-per"></span>%
        </span>
    </p><br>
    <p class="text-muted">
        售价 $ <input class="me-txt-usd-price" type="number" />
        <a class="btn btn-primary btn-sm btn-change-price">修改</a>
    </p>
    <p class="text-muted">
        提醒: 出货邮费由平台的运费模版计算
    </p>
    <p class="text-muted">
        1美元=6.8188人民币，1人民币=0.1467美元
    </p>
</div>
<script>
    $(function() {
        var key = 'money-exchange';
        var usd2cny = 6.8188;
        var cny2usd = 0.1467;
        var container = $('.' + key);
        var bidEl = container.find('.me-bid');
        var expressFeeEl = container.find('.me-express-fee');
        var profitPerEl = container.find('.me-profit-per');
        var pureProfitPerEl = container.find('.me-pure-profit-per');
        var priceEl = container.find('.me-price');
        var usdPriceEl = container.find('.me-usd-price');
        var txtUsdPriceEl = container.find('.me-txt-usd-price');
        var profitEl = container.find('.me-profit');
        // var showPriceEl = container.find('.me-show-price');
        var costEl = container.find('.me-cost');
        var btnChangePriceEl = container.find('.btn-change-price');
        var numberEls = container.find('[type="number"]');
        var moneyExchange = function(fieldName) {
            var bid = parseFloat(bidEl.val()) || 0;
            var expressFee = parseFloat(expressFeeEl.val()) || 0;
            var profitPer = parseFloat(profitPerEl.val()) || 0;
            var usdPrice = parseFloat(txtUsdPriceEl.val()) || 0;
            var cost = bid + expressFee; //成本
            var price;
            var profit;

            if (fieldName === '$price' && usdPrice) {
                price = usdPrice * usd2cny;
                profit = price - bid - expressFee - price * 0.05;
                //利润率=(售价-进价-邮费)/(进价+邮费)
                profitPer = (price - bid - expressFee) / cost;
                profitPerEl.val(Math.floor(profitPer * 100));
            } else {
                price = cost + (cost * (profitPer * 0.01));
                profit = price - bid - expressFee - price * 0.05;
            }

            priceEl.text(price.toFixed(2));
            usdPriceEl.text((price * cny2usd).toFixed(2));
            profitEl.text(profit.toFixed(2));
            //纯利润率=(利润/售价)*100
            pureProfitPerEl.text(((profit / price) * 100).toFixed(2));
            costEl.text(cost);
            // showPriceEl[price ? 'removeClass' : 'addClass']('hide');
        };
        var showCacheData = function() {
            numberEls.each(function() {
                this.value = localStorage[this.className] || this.value || '';
            });
        };
        var setCacheData = function() {
            numberEls.each(function() {
                localStorage[this.className] = this.value || '';
            });
        };

        showCacheData();
        moneyExchange();
        [bidEl, expressFeeEl, profitPerEl].forEach(function(el) {
            el.on('input', function() {
                moneyExchange();
                setCacheData();
            });
        });
        btnChangePriceEl.click(function() {
            moneyExchange('$price');
            txtUsdPriceEl.val('');
            setCacheData();
        });
    });
</script>
            </div>
        </div>
        <!-- <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">待开发</h3>
            </div>
            <div class="panel-body">
                
            </div>
        </div> -->
    </div>
    <div class="col-sm-4">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">常用</h3>
            </div>
            <div class="panel-body">
                <li>
                    <a href="https://docs.qq.com/sheet/BmAfQN2sop2v1PD3Vf3ahkL33GDWKK3baohy05BGA62tyoU03Cpduu0IAjCH0EBPWM0noU5K3?opendocxfrom=admin"
                        target="_blank">【文档】商品型号</a>
                </li>
                <li><a href="http://merchant.fy.intmall.net/main/panel" target="_blank">【管理】丰卖网</a></li>
                <li><a href="https://pan.baidu.com/" target="_blank">【工具】百度网盘</a></li>
                <li><a href="http://fanyi.baidu.com/#zh/en/" target="_blank">【工具】百度翻译</a></li>
            </div>
        </div>
        <!-- <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">待开发</h3>
            </div>
            <div class="panel-body">
                
            </div>
        </div> -->
    </div>
    <div class="col-sm-4">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title">待开发</h3>
            </div>
            <div class="panel-body">

            </div>
        </div>
        <!-- <div class="panel panel-danger">
            <div class="panel-heading">
                <h3 class="panel-title">待开发</h3>
            </div>
            <div class="panel-body">
                
            </div>
        </div> -->
    </div>
</div>
<!-- <div class="row">
    <div class="col-sm-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">百度翻译</h3>
            </div>
            <div class="panel-body">
                <iframe class="iframe-pannel" src="http://fanyi.baidu.com/#zh/en/"></iframe>
            </div>
        </div>
    </div>
</div> -->
<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">内容编辑器</h3>
            </div>
            <div class="panel-body">
                 <div class="editor">
    <div>
        <a class="btn btn-clear btn-default btn-sm">清空</a>
        <a class="btn btn-only-img btn-primary btn-sm">只要图片</a>&nbsp;&nbsp;
        <span class="text-muted">复制内容：点击编辑器Command + C</span>
    </div><br>
    <textarea></textarea>
</div>
<script>
    $(function() {
        var key = 'editor';
        var container = $('.' + key);
        var textareaEl = container.find('>textarea');
        var btnClearEl = container.find('.btn-clear');
        var btnOnlyImgEl = container.find('.btn-only-img');
        var config = {
            htmlRemoveTags: ['script', 'style', 'base', 'iframe'],
            htmlDoNotWrapTags: ['script', 'style'],
            htmlExecuteScripts: false
        };
        var viewer;
        var getCacheData = function() {
            return localStorage[key + '_content'] || '';
        };
        var setCacheData = function(val) {
            localStorage[key + '_content'] = val || '';
        };
        var initViewew = function() {
            try {
                if (!viewer) {
                    viewer = new Viewer(container.find('.fr-view')[0]);
                } else {
                    viewer.update();
                }
            } catch (ex) {}
        };
        var initEditor = function() {
            var cacheData = getCacheData();

            textareaEl.froalaEditor('destroy');
            textareaEl.val('');
            textareaEl.on('froalaEditor.contentChanged', function(ev, editor) {
                setCacheData(editor.html.get());
            }).on('froalaEditor.image.loaded', function(ev, editor) {
                initViewew();
            });
            textareaEl.froalaEditor({
                htmlRemoveTags: ['script', 'style', 'base'],
                htmlExecuteScripts: false
            });
            cacheData && textareaEl.froalaEditor('html.insert', cacheData, true);
        };

        initEditor();
        setTimeout(function() {
            initViewew();
        }, 1000);

        btnClearEl.click(function() {
            setCacheData('');
            initEditor();
        });

        btnOnlyImgEl.click(function() {
            var html = textareaEl.froalaEditor('html.get');
            var insertHtml = [];

            if (!html) return;

            $(html).find('img').each(function() {
                insertHtml.push(this.outerHTML);
            });
            insertHtml = insertHtml.join('');

            setCacheData(insertHtml);
            initEditor();
            viewer && viewer.update();
        });
    });
</script>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title">图片采集器</h3>
            </div>
            <div class="panel-body">
                 <div class="image-collector">
    <div class="clearfix">
        <div class="pull-left">
            <a class="btn btn-back btn-default btn-sm hide">
                <i class="glyphicon glyphicon-arrow-left"></i>
            </a>
            <a class="btn btn-preview btn-primary btn-sm">预览</a>
            <span class="img-count-box hide">
              总共
              <span class="img-count red"></span> 张图片
            </span>
        </div>
        <div class="pull-right">
        </div>
    </div><br>
    <textarea placeholder="粘贴html代码"></textarea>
    <div class="preview"></div>
</div>

<script>
    $(function() {
        var key = 'image-collector';
        var container = $('.' + key);
        var textareaEl = container.find('textarea');
        var previewEl = container.find('.preview');
        var imgCountEl = container.find('.img-count');
        var imgCountBoxEl = container.find('.img-count-box');
        var btnBack = container.find('.btn-back');
        var btnPreview = container.find('.btn-preview');
        var viewer;
        var showCacheData = function() {
            textareaEl.val(localStorage[key + '_content'] || '');
        };
        var setCacheData = function() {
            localStorage[key + '_content'] = textareaEl.val();
        };

        showCacheData();
        btnPreview.click(function() {
            var imgEls = $(textareaEl.val()).find('img');

            // imgEls.each(function(index) {
            //     var el = $(this);
            //     var aEl = $('<a href="' + el.attr('src') + '" download="' + index.toFixed(2) + '"/>');
            //     el.appendTo(aEl);
            //     previewEl.append(aEl);
            // });
            previewEl.html(imgEls);
            btnBack.removeClass('hide');
            btnPreview.hide();
            textareaEl.hide();
            previewEl.show();
            imgCountEl.text(imgEls.size());
            imgCountBoxEl.removeClass('hide');
            try {
                if (!viewer) {
                    viewer = new Viewer(previewEl[0]);
                } else {
                    viewer.update();
                }
            } catch (ex) {}
        });

        btnBack.click(function() {
            btnBack.addClass('hide');
            btnPreview.show();
            imgCountBoxEl.addClass('hide');
            textareaEl.show();
            previewEl.hide();
            // viewer && viewer.destroy();
        });

        // previewEl.on('mouseenter', 'img', function() {
        //     var el = $(this);

        //     el.addClass('mask');
        // });

        textareaEl.change(setCacheData);
    });
</script>
            </div>
        </div>
    </div>
</div>
<script></script>
    </div>
    <!-- /container -->
    
</body>

</html>